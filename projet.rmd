:---
title: "Projet d'Analyse et de Fouille de Données Massive"
output:
  html_document:
    df_print: paged
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(FactoMineR)
setwd("/home/jyra/Documents/Enssat/3A/AFDM/DataMiningProject")
```

# Introduction :
&ensp;Le but du projet est de manipuler différentes méthodes d'analyses de données sur un jeu de données constitué d'une centaine d'individus et d'une dizaine de variables qualitatives et quantitatives. Nous avons choisi comme jeu de données les vidéos présentes dans la catégorie "Tendances" du site YouTube France sur une période allant de novembre 2017 à juin 2018. La catégorie "Tendances" de YouTube met en évidence les vidéos les plus vues et les plus appréciées par les utilisateurs de la plateforme. Elle permet donc une plus grande visibilité pour les créateurs de contenu. Une vidéo est placée dans la catégorie "Tendances" par un algorithme se fondant sur les statistiques de la vidéo ainsi que sur les interactions des utilisateurs avec celle-ci. L'analyse des facteurs permettant à une vidéo d'être présente en "Tendances" peut donc être intéressante pour les vidéastes de la plateforme souhaitant être mis en avant. 

## Présentation de nos données :

&ensp;Nous avons extrait nos données du site Kaggle (https://www.kaggle.com/datasnaek/youtube-new). Ces données contiennent un ensemble de statistiques sur les vidéos de la catégorie "Tendances" de YouTube. Nous avons décidé d'extraire les statistiques qui nous paraissaient pertinentes pour pouvoir déterminer les facteurs influant sur la présence ou non d'une vidéo dans la catégorie "Tendances". Ces statistiques sont resumées dans le tableau suivant et seront utilisées comme variables qualitatives ou quantitatives dans les différentes méthodes d'analyse des données.

|                 Nom                |   Attribut  |
|:----------------------------------:|:-----------:|
|           Taux LOWER Case          | quantitatif |
|           Taux UPPER Case          | quantitatif |
|               Nb tags              | quantitatif |
|               Nb vues              | quantitatif |
|           Nb commentaires          | quantitatif |
|              Nb likes              | quantitatif |
|             Nb dislikes            | quantitatif |
|Taille de la  description (en mots) | quantitatif |
|              Catégorie             |  qualitatif |
| Jour de la semaine                 |  qualitatif |
|        Moment de la  journée       |  qualitatif |
|    Nombre de lien en description   | quantitatif |

&ensp;Nous pouvons nous attendre à une forte corrélation entre la présence d'une vidéo en "Tendances" et son nombre de vues, de "J'aime" et de commentaires. Néanmoins, d'autres variables peuvent influer de manière indirecte sur le nombre de vues comme le nombre de majuscules dans le titre, le nombre de tags associés à la vidéo ou encore la longueur de la description. La publication de la vidéo peut également être ciblée afin de toucher le plus de personnes possible (une vidéo publiée le vendredi soir à 18h aura probablement plus d'impact qu'une vidéo publiée le mardi matin à 8h). Nous serons également en mesure d'exhiber le type de vidéos qui plaisent au public français via la catégorie mais aussi de comparer les audiences des vidéos appartenant à différentes catégories (par exemple, les personnes regardant des vidéos sportives consultent également des vidéos de mode ou de divertissement). 


## Traitement du jeu de données
&ensp;A partir du jeu de données télechargé au format csv, nous avons généré un nouveau fichier csv contenant, pour chaque vidéo, les statistiques listées dans le tableau précédent Vous pouvez retrouver le code commenté pour l'extraction et le traitement des données brutes initiales dans le fichier 'processData.py'.


## Analyse des données
&ensp;Dans cette partie, nous allons analyser les données que nous avons extraites et qui se trouvent dans le fichier "youtubeTrends.csv". Ce fichier contient 40703 individus. Néanmoins les méthodes d'analyse détaillées dans cette partie ne porteront que sur une centaine d'invidus. Nous sélectionnons donc 100 vidéos de manière aléatoire dans le fichier "youtubeTrends.csv". Ces 100 vidéos seront utilisées comme individus pour les différentes méthodes d'analyse.  


Code pour selectionner les 100 individus aléatoirement :
```{r}
data = read.csv("./DATA/youtubeTrends.csv")
data = data[sample(nrow(data), 100),]
```

Code pour récupérer les 100 individus que nous avons utilisé et sauvegardé :

```{r}
setwd("/home/DataMiningProject")
load('./random_data.rdata')
```


# Analyse en Composantes Principales (ACP)

&ensp;La première analyse que nous allons effectuer sera une ACP. Cette analyse ne porte que sur des données qualitatives. Ainsi, il faut retirer de nos données les variables qualitatives. Ensuite, on applique l'ACP sur les données filtrées.
```{r}
# On retire les données qualitatives
data_ACP = data
data_ACP$category <- NULL
data_ACP$momentOfDay <- NULL
data_ACP$day <- NULL
data_ACP$index <- NULL

# On retire les données considérées comme faiblement corellées après les premiers tests 
data_ACP$nbTags <- NULL
data_ACP$nbWords <- NULL
data_ACP$nbLinks <- NULL

# On applique l'ACP sur les données filtrées
res.pca = PCA(data_ACP, scale.unit=TRUE, ncp=6, graph=T) 
```

&ensp;Sur la figure, on constate que les données sont bien représentées. En effet, 46.89%  des données sont représentées sur l'axe 1 et 28.47% sur l'axe 2.
On voit que le nombre de likes et dislikes sont corrélés. Néanmoins, après analyse, il apparaît que ces deux variables ne capturent pas vraiment ce que l'on voulait. En effet, nous ne savons pas en quoi ils sont corrélés (si un grand nombre de likes est associé à un grand nombre de dislikes...). Ainsi, pour voir l'impact du nombre de likes et de dislikes, on introduit deux nouvelles variables quantitatives : le ratio de like et le ratio de dislikes par vidéo. 

```{r}
# On retire les données qualitatives
data_ACP = data
data_ACP$category <- NULL
data_ACP$momentOfDay <- NULL
data_ACP$day <- NULL
data_ACP$index <- NULL

# On retire les données faiblement corellé
data_ACP$nbTags <- NULL
data_ACP$nbWords <- NULL
data_ACP$nbLinks <- NULL

# Ajout du ratio de like et dislike
data_ACP$ratioLikes <- data_ACP$nbLikes/(data_ACP$nbLikes + data_ACP$nbDislikes)
data_ACP$ratioDislikes <- data_ACP$nbDislikes/(data_ACP$nbLikes + data_ACP$nbDislikes)

data_ACP$nbLikes <- NULL
data_ACP$nbDislikes <- NULL

res.pca = PCA(data_ACP, scale.unit=TRUE, ncp=6, graph=T) 
```

# Analyse des Composantes Multiples (ACM)

&ensp;Dans cette partie, nous allons réaliser une ACM sur 3 attributs qualitatifs : le jour de la semaine où la vidéo est publiée, le moment de la journée et la catégorie de la vidéo.

&ensp;Dans un premier temps, nous préparons les données en enlevant la moitié des données. En effet, si l'on choisit d'effectuer l'ACP sur l'ensemble des données, le graphe résultant contient trop de points superposés et il est difficile de l'interpréter. Ensuite, il faut effectuer une petite opération pour transformer nos données en type Factor (un type spécifique à R). Cette opération est necessaire car sans cela, nous obtenons une erreur. Enfin, on retire tous les attributs quantitatifs sauf le nombre de likes, dislikes et de commentaires. On conserve ces attributs car on souhaite regrouper les attributs qualitatifs en fonction de leur poids sur le fait que la vidéo soit en "Tendances", qui se représente à l'aide des 3 variables quantitatives ci-dessus.

```{r}
data_ACM = data[1:50,] 
i=0
while(i<ncol(data_ACM)){
  i=i+1
  data_ACM[,i]=as.factor(data_ACM[,i])
}
data_ACM$index <- NULL
data_ACM$nbTags <- NULL
data_ACM$nbWords <- NULL
data_ACM$nbLinks <- NULL
data_ACM$X.lowerCase <- NULL
data_ACM$X.upperCase <- NULL

```

## Moment de la semaine

&ensp;Nous nous interessons, dans un premier temps, au moment de la journée où la vidéo à été publiée. On s'attend éventuellement à voir regroupés ensemble des jours de la semaine qui sont proches (en fonction de s'ils sont en début, milieu et fin de semaine). 

```{r}
res.mca_1 = MCA(data_ACM, quali.sup = c(4), graph = FALSE)
plot.MCA(res.mca_1, invisible=c("var"), cex=0.75)
```

La prochaine ACM cherche à étudier les corrélations entre les moments de la journée. Intuitivement, on pourrait penser que les vidéos qui sortent l'après-midi n'ont pas le même succés qu'une vidéo qui sortirait le matin ou le soir. 

&ensp;Les résultats obtenus sont plutôt satisfaisants, même si l'on représente peu les données (5.31%). On peut observer que certains jours sont reliés comme le Jeudi et Mercredi. Cela semble cohérent qu'ils possèdent la même visibilité car ils se trouvent tous deux en milieu de semaine. Le Vendredi se retrouve un peu à part; on peut penser que les vidéos publiées le vendredi s'adressent davantage à un publique adulte, qui regarderait les vidéos après le travail. Résultat plus étonnant, on constate que le Samedi et Lundi sont liés ainsi que le Mardi et Dimanche. 

## Moment de la journée

```{r}
res.mca_2 = MCA(data_ACM, quali.sup = c(5), graph = FALSE)
plot.MCA(res.mca_2, invisible=c("var"), cex=0.75)
```

L'ACM est 
## Catégorie
```{r}
res.mca_3 = MCA(data_ACM, quali.sup = c(7), graph = FALSE)
plot.MCA(res.mca_3, invisible=c("var"), cex=0.75)
```



# Analyse Factorielle des Correspondances (AFC)

```{r}
data_AFC = data
res.afc = CA(data_AFC[, c(2:5 ,12:13)])
```


